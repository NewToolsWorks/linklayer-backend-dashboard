import{r as c,b as s,j as t,a as o,g as f}from"./index-BdWtd8kq.js";import{C as y}from"./cardEnableLayer-D2lrZUh0.js";const b=()=>{let[e,x]=c.useState({enabled:!1,t:[{Cert:s()+"/cfg/cert.pem",Key:s()+"/cfg/key.pem",Listen:""}]}),l=()=>{x({...e})},i=()=>{o.get("/api/read/tls?"+f()).then(r=>{r.data.length>0?(e.enabled=!0,e.t=r.data):(e.enabled=!1,e.t=[{Cert:s()+"/cfg/cert.pem",Key:s()+"/cfg/key.pem",Listen:""}]),l()}).catch(r=>{})};c.useEffect(()=>{i()},[]);let m=()=>{e.t.push({Cert:s()+"/cfg/cert.pem",Key:s()+"/cfg/key.pem",Listen:""}),l()},h=r=>{let a=e.t.filter((d,n)=>n!=r);e.t=a,l()};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"w-full",children:[t.jsx(y,{enabled:e.enabled,onChange:r=>{e.enabled=r,l()}}),t.jsx("div",{className:"flex flex-row justify-center mt-5",children:t.jsxs("div",{className:"flex flex-col w-3/5 p-4 shadow-2 bg-white  with-overflow-vh md:w-3/5 w-4/5",children:[t.jsx("h4",{className:"mb-1 mt-2 font-bold font-sans  text-black dark:text-white",children:"Listen layer(s) SSL/TLS"}),e.t.map((r,a)=>{let d=a==e.t.length-1;return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[t.jsx("p",{className:"text-xs text-gray-200 mb-2 ",children:"The address where the example server will listen : 0.0.0.0:443"}),a>0&&t.jsx("a",{onClick:()=>{confirm("Are your sure delete "+e.t[a].Listen)&&h(a)},href:"#",className:" px-2 py-2 text-center text-xs text-primary ",children:"Delete this layer"})]}),t.jsx("input",{value:r.Listen,onChange:n=>{r.Listen=n.target.value,l()},type:"text",className:" rounded-lg border-[1.5px] border-stroke bg-transparent py-3 px-5 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary"}),d&&t.jsx("div",{className:"w-full flex flex-row justify-end",children:t.jsx("a",{onClick:()=>m(),href:"#",className:" px-2 py-2 text-center text-xs text-primary ",children:"Add new layer"})})]})})}),t.jsx("div",{className:"w-full flex flex-row justify-center",children:t.jsx("button",{onClick:()=>{(e.t[0].Listen!=""||e.t.length>0)&&!e.enabled&&!confirm("are you sure you want to disable this layer?")||o.post("/api/layer/tls?"+f(),e).then(r=>{let a=e.enabled?"TLS layer updated":"TLS layer disabled and deleted parameters";alert(a),i()})},className:"w-3/4 mt-2 flex w-full cursor-pointer justify-center rounded bg-sky-800 p-3 font-medium text-gray hover:bg-opacity-90",children:"Save SSL/TLS Layer"})})]})})]})})};export{b as default};
