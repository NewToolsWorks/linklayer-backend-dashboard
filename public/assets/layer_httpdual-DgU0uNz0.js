import{j as t,r as h,b as d,a as f,g as y}from"./index-9mx06GO8.js";import{C as j}from"./cardEnableLayer-DELu8wh0.js";var r=[];for(var o=0;o<256;++o)r.push((o+256).toString(16).slice(1));function k(e,a=0){return(r[e[a+0]]+r[e[a+1]]+r[e[a+2]]+r[e[a+3]]+"-"+r[e[a+4]]+r[e[a+5]]+"-"+r[e[a+6]]+r[e[a+7]]+"-"+r[e[a+8]]+r[e[a+9]]+"-"+r[e[a+10]]+r[e[a+11]]+r[e[a+12]]+r[e[a+13]]+r[e[a+14]]+r[e[a+15]]).toLowerCase()}var i,v=new Uint8Array(16);function T(){if(!i&&(i=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!i))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(v)}var L=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const p={randomUUID:L};function P(e,a,u){if(p.randomUUID&&!a&&!e)return p.randomUUID();e=e||{};var n=e.random||(e.rng||T)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,k(n)}const D=e=>{let a=P();return t.jsx(t.Fragment,{children:t.jsx("div",{children:t.jsx("label",{htmlFor:a,className:"flex cursor-pointer select-none items-center",children:t.jsxs("div",{className:"relative",children:[t.jsx("input",{id:a,type:"checkbox",className:"sr-only",onChange:()=>{e.onChange(!e.enabled)}}),t.jsx("div",{className:"h-5 w-14 rounded-full bg-meta-9 shadow-inner dark:bg-[#5A616B]"}),t.jsx("div",{className:`dot absolute left-0 -top-1 h-7 w-7 rounded-full bg-white shadow-switch-1 transition ${e.enabled&&"!right-0 !translate-x-full !bg-primary dark:!bg-white"}`})]})})})})},H=()=>{let[e,a]=h.useState({enabled:!1,hd:[{IsTLS:!1,Limit:"",PacketBuffer:500,Listen:"",Key:d()+"/cfg/key.pem",Cert:d()+"/cfg/cert.pem"}]}),u=[{Desc:"Limit:  Limit bytes read from Upload connection default 1MB, field in MegaBytes",PlaceHolder:"1MB",key:"Limit"},{Desc:"PacketBuffer: Limit packets can queue in upload connections It is recommended to set a value equal to 500 Setting a lower value may affect navigation",PlaceHolder:"500",key:"PacketBuffer"},{Desc:"Listen: The address/port where the connection will be handled is required.",PlaceHolder:"0.0.0.0:80",key:"Listen"},{Desc:"Key: Private key path",PlaceHolder:"/root/cert.key",key:"Key"},{Desc:"Cert: Public certificate path",PlaceHolder:"/root/cert.crt",key:"Cert"}],n=()=>{a({...e})},m=()=>{f.get("/api/read/httpdual?"+y()).then(l=>{l.data.length>0?(e.enabled=!0,e.hd=l.data):(e.enabled=!1,e.hd=[{IsTLS:!1,Limit:"",PacketBuffer:500,Listen:"",Key:d()+"/cfg/key.pem",Cert:d()+"/cfg/cert.pem"}]),n()}).catch(l=>{})};h.useEffect(()=>{m()},[]);let g=()=>{e.hd.push({IsTLS:!1,Limit:"",PacketBuffer:0,Listen:"",Key:"",Cert:""}),n()};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"w-full",children:[t.jsx(j,{enabled:e.enabled,onChange:l=>{e.enabled=l,n()}}),t.jsx("div",{className:"flex flex-row justify-center mt-5",children:t.jsxs("div",{className:"flex flex-col w-3/5 p-4 shadow-2 bg-white  md:w-3/5 w-4/5 with-overflow-vh",children:[t.jsx("h4",{className:"mb-1 mt-2 font-bold font-sans  text-black dark:text-white",children:"Configure HTTP Dual"}),t.jsx("p",{className:"text-xs text-gray-200 mb-2",children:"Parameters required to configure the HTTP Dual protocol"}),e.hd.map((l,c)=>{let b=c==e.hd.length-1;return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("div",{className:"flex flex-row justify-around bg-dual p-2 rounded-tl-lg rounded-br-lg items-center",children:[t.jsx("p",{className:"text-2xl font-semibold text-xs text-gray-200  ",children:"Enable TLS"}),t.jsx(D,{enabled:l.IsTLS,onChange:s=>{l.IsTLS=s,n()}})]}),u.map((s,x)=>t.jsx(t.Fragment,{children:t.jsxs("div",{className:"w-full "+(x>2&&!l.IsTLS?"hidden":""),children:[t.jsx("div",{className:"w-full flex flex-row justify-between items-center",children:t.jsx("p",{className:"text-xs text-gray-200 mb-2 "+(x==0?"":"mt-2"),children:s.Desc})}),t.jsx("input",{value:l[s.key],onChange:w=>{l[s.key]=w.target.value,n()},placeholder:s.PlaceHolder,type:"text",className:" w-full rounded-lg border-[1.5px] border-stroke bg-transparent py-3 px-5 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary"})]})})),b&&t.jsx("div",{className:"w-full flex flex-row justify-end",children:t.jsx("a",{onClick:()=>{g()},href:"#",className:" px-2 py-2 text-center text-xs text-primary ",children:"Add new layer"})})]})})}),t.jsx("div",{className:"w-full flex flex-row justify-center",children:t.jsx("button",{onClick:()=>{(e.hd[0].Listen!=""||e.hd.length>1)&&!e.enabled&&!confirm("are you sure you want to disable this layer?")||f.post("/api/layer/httpdual?"+y(),e).then(l=>{let c=e.enabled?"HTTP DUAL  layer updated":"HTTP DUALs Mix layer disabled and deleted parameters";alert(c),m()})},className:"w-3/4 mt-2 flex w-full cursor-pointer justify-center rounded bg-sky-800 p-3 font-medium text-gray hover:bg-opacity-90",children:"Save HTTP Dual Layer"})})]})})]})})};export{H as default};
