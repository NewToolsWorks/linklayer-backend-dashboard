import{r as l,b as o,j as r,a as c,g as u}from"./index-BTuJAYcR.js";import{S as y}from"./SelectGroupTwo-DflvnOZ6.js";import{C as h}from"./cardEnableLayer--SU_QOk1.js";const j=()=>{let[e,m]=l.useState({enabled:!1,u:{listen:":36718",exclude:"",net:"",cert:o()+"/layers/cfgs/my.crt",key:o()+"/layers/cfgs/my.key",obfs:"",max_conn_client:5e5}}),[x,d]=l.useState(0),[a,f]=l.useState([{NetName:"",Ip:""}]),s=()=>{f([...a]),m({...e})},n=()=>{c.get("/api/read/udp?"+u()).then(t=>{a=t.data.extra.networks,t.data.service.length>0?(e.u=t.data.service[0],e.enabled=!0,a.forEach((b,p,g)=>{b.NetName==e.u.net&&d(p)})):(e.enabled=!1,e.u={listen:":36718",exclude:"",net:"",cert:o()+"/layers/cfgs/my.crt",key:o()+"/layers/cfgs/my.key",obfs:"",max_conn_client:5e5},d(0)),s()}).catch(t=>{})};return l.useEffect(()=>{n()},[]),r.jsx(r.Fragment,{children:r.jsxs("div",{className:"w-full",children:[r.jsx(h,{enabled:e.enabled,onChange:t=>{e.enabled=t,s()}}),r.jsx("div",{className:"flex flex-row justify-center mt-5",children:r.jsxs("div",{className:"flex flex-col w-3/5 p-4 shadow-2 bg-white  md:w-3/5 w-4/5",children:[r.jsx("h4",{className:"mb-1 mt-2 font-bold font-sans  text-black dark:text-white",children:"Configure UDPHyRequest"}),r.jsx("p",{className:"text-xs text-gray-200 mb-2",children:"ports can be excluded from iptables separated by comma: mandatory 53,5300"}),r.jsx("input",{placeholder:"53,5300",value:e.u.exclude,onChange:t=>{e.u.exclude=t.target.value,s()},type:"text",className:" rounded-lg border-[1.5px] border-stroke bg-transparent py-3 px-5 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary"}),r.jsx("p",{className:"text-xs text-gray-200 mb-2 mt-2 ",children:"Chose your network interface  to internet"}),r.jsx(y,{selOption:x,NetworkList:a,CallSelected:t=>{e.u.net=a[t].NetName,s(),d(t)}}),r.jsx("p",{className:"text-xs text-gray-200 mb-2 mt-2 ",children:"The obfuscated password"}),r.jsx("input",{placeholder:"Key OBFS",value:e.u.obfs,onChange:t=>{e.u.obfs=t.target.value,s()},type:"text",className:" rounded-lg border-[1.5px] border-stroke bg-transparent py-3 px-5 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary"}),r.jsx("div",{className:"w-full flex flex-row justify-center",children:r.jsx("button",{onClick:()=>{e.u.exclude!=""&&!e.enabled&&!confirm("are you sure you want to disable this layer?")||c.post("/api/layer/udp?"+u(),e).then(t=>{let i=e.enabled?"UDP  layer updated":"UDP Mix layer disabled and deleted parameters";alert(i),n()}).catch(t=>{alert("service running, please stop.")})},className:"w-3/4 mt-2 flex w-full cursor-pointer justify-center rounded bg-sky-800 p-3 font-medium text-gray hover:bg-opacity-90",children:"Save UDPHyRequest Layer"})})]})})]})})};export{j as default};
